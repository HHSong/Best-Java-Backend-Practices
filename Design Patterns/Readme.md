# Design Patterns
 -- by Hao Hsiang Song

"There is nothing new under the sun." That explains the existence of design patterns. Every new features or problems could be decomposed into one or more commonly seen problems. And the solutions to them are well known the programmers' world.

---

## Creational Patterns

#### 1. Builder
Builder pattern aims to construct objects in a most customizable way (in contrast to factory pattern). The attributes of the objects are indirectly set through the builder class which controls the flow. This sounds abstract so let look at some codes:

```java
public class AdvertisementBuilder {
  private Advertisement ad;
  public AdvertisementBuilder() {
    ad = new Advertisement();
  }

  public AdvertisementBuilder setTitle(String title) {
    ad.setTitle(title);
    return this;
  }

  public AdvertisementBuilder setCompany(Company company) {
    ad.setCompany(company);
    return this;
  }

  public AdvertisementBuilder setDuration(double duration) {
    ad.setDuration(duration);
    return this;
  }

  public AdvertisementBuilder setUrl(Url url) {
    ad.setUrl(url);
    return this;
  }

  // more setters

  public Advertisement build() {
    return ad;
  }

}

public class Advertisement {
  private String title;
  private Company owner;
  private double duration;
  private Url link;
  // more fields

  Advertisement() {} // different variations may have builder class as an inner class of the advertisement class

  // setters and getters
}

```

The codes look long and tedious. And yes they are. But we gain the advantage of controlling the flow of building the objects. A more complicated flow control could be done using different inner classes to expose certain fields before/after other fields. Some variation may have the duplicate fields in the builder class as well and initialize the Advertisement object when callign build() function.
Another advantage of this is to build a functional style of object creation: through a chain of function calls. It makes code a bit more readable and cleaner.
```java
Advertisement ad = new AdvertisementBuilder()
  .setTitle("title")
  .setDuration(1000)
  // more
  .build();
```
Comparing that to traditional setters:
```java
Advertisement ad = new Advertisement();
ad.setTitle("title");
ad.setDuration(1000);
// more
```
A common example can been seen in JAX-RS when building an http response or building Mybatis autogenerated queries.


